<!DOCTYPE html>
<html lang='en'>

<head>
    <title>
        1.1 Vectors, You Complete Me
    </title>
    <style>
        body {
            margin: 0px;

        }

        #CANVAS {
            /* background-color: #96ceb4; */
            background-color: gray;
        }
    </style>
</head>

<body>
    <canvas id='CANVAS'>
    </canvas>
    <script>
        const canvas = document.getElementById('CANVAS')
        const WIDTH = window.innerWidth
        const HEIGHT = window.innerHeight
        canvas.width = WIDTH
        canvas.height = HEIGHT
        const ctx = canvas.getContext('2d')
        

/////////////////////////////////////////////////////////
// 마우스 이벤트 처
const mouse={
    x: 0,
    y: 0
}

addEventListener('mousemove',function(e){
    mouse.x = e.clientX - WIDTH/2
    mouse.y = e.clientY - HEIGHT/2
})


/////////////////////////////////////////////////////////

        class Ball {
            constructor(x, y, radius) {
                this.x = x
                this.y = y
                this.radius = radius
                this.vx = 0
                this.vy = 0

                this.dx = 0
                this.dy = 0

            }
            sub(m1, m2) {
                this.dx = m1 - this.x
                this.dy = m2 - this.y
            }
            multi(n) {
                this.n = n
                this.dx *= n
                this.dy *= n
            }
            limit(max) {
                this.max = max
                if(this.vx > max || this.vy > max){
                    this.vx = max
                    this.vy = max
                }
            }
            acceleration() {
                this.vx += this.dx
                this.vy += this.dy
            }
            div(n) {
                this.dx /= n
                this.dy /= n
            }
            distance() {
                return Math.sqrt(Math.pow(this.dx, 2) + Math.pow(this.dy, 2))

            }
            normalize() {
                let m = this.distance()
                if (m != 0) {
                    this.div(m)
                }
            }
            add() {
                this.x += this.vx
                this.y += this.vy
            }
            checkEdges() {
            if (this.x > WIDTH / 2) {
            this.x = -WIDTH / 2
            } else if (this.x < -WIDTH / 2) { this.x=WIDTH / 2 } if (this.y> HEIGHT / 2) {
                this.y = - HEIGHT / 2
                } else if (this.y < - HEIGHT / 2) { this.y=HEIGHT / 2 } }

            draw() {
                
                ctx.beginPath()
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2)
                ctx.fillStyle = "#ffeead"
                ctx.fill()
                ctx.closePath()
            }
            display() {
                
                this.draw()
            }
        }


        // ctx.translate(center.x, center.y)
        ctx.translate(WIDTH / 2, HEIGHT / 2)
        const ball = new Ball((Math.random() - 0.5) * WIDTH, (Math.random()-0.5) *HEIGHT, 30)

        

        function render() {
            ctx.clearRect(-WIDTH/2, -HEIGHT/2, WIDTH, HEIGHT)
            
            ball.sub(mouse.x, mouse.y)

            
            ball.normalize()
            ball.multi(0.1)
            
            

            ball.limit(1)
            ball.acceleration()

            console.log(ball.vx, ball.vy)
            ball.add()
            ball.checkEdges()
            ball.display()
            
            
            requestAnimationFrame(render)
        }
        requestAnimationFrame(render)
    </script>
</body>

</html>

<!-- #ffeead, #ffcc5c, 	#88d8b0 -->